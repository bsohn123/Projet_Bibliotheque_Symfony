{% extends 'base.html.twig' %}

{% block title %}Mes emprunts{% endblock %}

{% block body %}
<section class="card-elevated p-4 p-lg-5">
    <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
        <div>
            <span class="tag">Espace personnel</span>
            <h1 class="mt-3 mb-1">Mes emprunts</h1>
            <p class="text-muted mb-0">Retrouvez vos livres empruntés et gérez les retours.</p>
        </div>
        <a class="btn btn-outline-ink" href="{{ path('app_book_index') }}">Retour aux livres</a>
    </div>

    <div class="mt-4">
        {% for loan in loans %}
            <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3 p-3 border rounded-4 mb-3">
                <div>
                    <div class="fw-semibold">{{ loan.book.title }}</div>
                    <div class="text-muted small">Emprunté le {{ loan.borrowedAt|date('d/m/Y H:i') }}</div>
                </div>
                <form method="post" action="{{ path('loan_return', {id: loan.id}) }}" class="m-0">
                    <button type="submit" class="btn btn-accent btn-sm">Rendre</button>
                </form>
            </div>
        {% else %}
            <div class="text-muted">Aucun emprunt en cours.</div>
        {% endfor %}
    </div>
</section>
{% endblock %}
